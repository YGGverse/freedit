{% extends "layout.html" %}

{% block content %}
<div class="level is-mobile">
    <div class="level-left"></div>
    <div class="level-right tags">
        <a href="/notification?&op_type=mark_batch" class="button is-small is-rounded is-info" title="{{ "batch_mark_as_read"|l10n(page_data.lang) }}">
            <i class="fa-solid fa-check"></i>
        </a>
        <a href="/notification?&op_type=delete_batch" class="button is-small is-rounded is-danger" title="{{ "batch_delete_read"|l10n(page_data.lang) }}">
            <i class="fa-solid fa-trash"></i>
        </a>
    </div>
</div>

<div class="box">
    {% for inn_nt in inn_notifications %}
    <div class="media">
        <div class="media-left">
            <a class="image is-48x48" href="/user/{{inn_nt.uid}}">
                <img class="is-rounded" src="/static/avatars/{{inn_nt.uid}}.png">
            </a>
        </div>
        <div class="media-content">
            <div class="list-item-description">
                would like to join Inn <a href="/user/list?filter=inn&id={{inn_nt.iid}}">{{inn_nt.iid}}</a>
            </div>
        </div>
        <div class="level is-mobile">
            <form class="level-left" id="role" action="/role/{{inn_nt.iid}}/{{inn_nt.uid}}" method="post">
                <div class="level-item field has-addons">
                    <p class="control">
                        <span class="select is-small">
                            <select name="role" required autocomplete="off">
                                <option selected value="Pending">{{ "pending"|l10n(page_data.lang) }}</option>
                                <option value="Rejected">{{ "rejected"|l10n(page_data.lang) }}</option>
                                <option value="Limited">{{ "limited"|l10n(page_data.lang) }}</option>
                                <option value="Intern">{{ "intern"|l10n(page_data.lang) }}</option>
                                <option value="Fellow">{{ "fellow"|l10n(page_data.lang) }}</option>
                                <option value="Mod">{{ "mod"|l10n(page_data.lang) }}</option>
                                <option value="Super">{{ "super"|l10n(page_data.lang) }}</option>
                            </select>
                        </span>
                    </p>
                    <div class="control">
                        <button type="submit" class="button is-success is-small">{{ "save"|l10n(page_data.lang) }}</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    {% endfor %}

    {% for nt in notifications %}
    <div class="media">
        <div class="media-left">
            <a class="image is-48x48" href="/user/{{nt.uid}}">
                <img class="is-rounded" class="is-rounded" src="/static/avatars/{{nt.uid}}.png">
            </a>
        </div>
        <div class="media-content">
            <div class="list-item-description">
                <small>{{nt.content1}}</small>
                {% if nt.is_read %}
                    {{nt.content2}}
                {% else %}
                    <strong>{{nt.content2}}</strong>
                {% endif %}
            </div>
        </div>
        <div class="level is-mobile">
            <div class="level-left">
                {% if !nt.is_read %}
                <a class="level-item" href="/notification?nid={{nt.nid}}&op_type=mark">
                    <span class="button is-small is-rounded is-info" title="{{ "mark_as_read"|l10n(page_data.lang) }}Mark as read">
                        <i class="fa-solid fa-check"></i>
                    </span>
                </a>
                {% endif %}
                <a class="level-item" href="/notification?nid={{nt.nid}}&op_type=delete">
                    <span class="button is-small is-rounded is-danger" title="{{ "delete_notification"|l10n(page_data.lang) }}">
                        <i class="fa-solid fa-trash"></i>
                    </span>
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="divider"></div>

<nav class="pagination">
    {% if anchor < n %}
        <a class="pagination-previous" disabled>{{ "prev"|l10n(page_data.lang) }}</a>
    {% else %}
        <a class="pagination-previous" href="/notification?anchor={{anchor - n}}">{{ "prev"|l10n(page_data.lang) }}</a>
    {% endif %}

    {% if notifications.len() < n %}
        <a class="pagination-next" disabled >{{ "next"|l10n(page_data.lang) }}</a>
    {% else %}
        <a class="pagination-next" href="/notification?anchor={{anchor + n}}">{{ "next"|l10n(page_data.lang) }}</a>
    {% endif %}
</nav>
{% endblock %}